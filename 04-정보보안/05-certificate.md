# 인증서

- 자신이 올바른 존재라는 것을 나타내기 위해 사용하는 장치
- 서버의 존재 증명
- 암호화 통신을 수행하기 위한 신뢰의 기초(예: TLS)
- 인증서의 발행자, 발행을 받는 자, 유효기한


### 인증국(Certificate Authority)
- PKI(Public Key Infrastructure): 인증국을 유지 운용하는 장치
- GPKI: 국가가 운영하는 PKI

##### 루트 인증국
- 최상위 인증국
- 루트인증국의 정당성은 자기 스스로 보증
- 루트 인증서: 루트 인증국이 발행한 인증서가 올바른지 확인하는 인증서. 루트 인증국 본인을 증명하는 인증서

##### 중간 인증국
- 루트 인증국으로부터 위임 같은 인증국
- 루트 인증국에서 신뢰를 받음으로써 자신을 증명
- 중간 인증서: 상위 인증국이 발행. 중간 인증국 자신을 증명하는 인증서.

### 인증서 검증 방식
- 서버의 인증서를 루트 인증서 또는 중간 인증서로 검증
- 루트 인증서는 OS나 브라우저와 함께 배포(신경쓸 필요 없음)
- 중간 인증서는 서버를 운용하는 측이 서버에 저장할 수 있도록 열어줌
- CRL(Certificate Revocation List): 특정 인증서의 비밀키를 도난당한 경우, 해당 인증서를 무효화. 무효화한 인증서 목록
- OCSP(Open Ceritificate Status Protocol): 인증서 유효성 확인

### 인증서 검증 절차
- 루트 인증국이 인증서를 발행한 경우
	1. 이용자 -> 서버: 서버 인증서 제시 요청
	2. 이용자 <- 서버: 인증서 제시
	3. 이용자: 인증서 검증   
		1) 사용자가 가진 루트 인증서에서 공개키 추출   
		2) 공개키를 사용해 루트 인증국의 비밀키로 서명된 서버의 인증서를 검증

- 중간 인증국이 인증서를 발행한 경우
	1. 이용자 -> 서버: 서버 인증서와, 중간 인증서 제시 요청
	2. 이용자 <- 서버: 인증서 제시
	3. 이용자: 인증서 검증   
		1) 중간 인증서의 공개키 추출   
		2) 중간 인증국의 비밀키로 서명된 서버 인증서를 공개키로 검증   
		3) 이용자가 가진 루트 인증서의 공개키 추출   
		4) 루트 인증국의 비밀키로 서명된 중간 인증서를 공개키로 검증