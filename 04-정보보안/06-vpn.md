# VPN

### 방화벽
- 외부의 공격으로부터 방어하는 것을 목적으로 컴퓨터에 설치하는 하드웨어/소프트웨어
- 예: 패킷 필터형 방화벽, 애플리케이션 게이트웨이형 방화벽
- 네트워크(내부 또는 외부) 간 통신 가능 여부 제어
- 보통 TCP/IP 헤더에 포함되는 IP주소, 포트번호, 통신상태 등을 이용해 통신 가능 여부 제어

#### 패킷 필터형 방화벽
- 고속
- 데이터를 보거나 세션, 타이밍을 보는 복잡한 제어에는 부적합
- TCP/IP 헤더에 관한 조건을 부여

#### 애플리케이션 게이트웨이형 방화벽
- 저속
- 통신의 내용을 보고 제어
- TCP/IP 헤더와 통신 데이터 모두에 조건을 부여

#### 웹 애플리케이션 방화벽(WAF)
- 웹 애플리케이션 통신 제어에 특화
- HTTP 프로토콜을 바탕으로 룰을 정함
- 공격이 보통 SQL 인젝션, OS command 인젝션과 같이 HTTP 통신을 통해 들어옴
- NG 워드로 규칙 등록
- 규칙을 주기적으로 업데이트 해줘야함
- 단기 도입이 쉬움
- 본질적인 약점은 해결되지 않고 룰을 갱신하는 것으로 급처

#### 프록시 서버
- 해당 컴퓨터 대신 인터넷 액세스
- IP 주소를 효과적으로 활용하기 위해
- 프록시 서버가 글로벌 IP 주소를 가지고, 내부 프라이빗 IP 사용
- 외부 인터넷을 사용할 경우에만 프록시 서버의 IP를 통해 사용
- 내부 네트워크의 보안 효과 (프록시 서버의 로그로 내부 네트워크 이력 확인)

## VPN
- 인터넷을 이용해 여러 네트워크 간에서 안전한 통신을 하기 위한 장치
- 실제로 만드는 것이 아니라 가상으로 만듦
- 물리적인 전용선으로 구현하는 것은 비용이 높다
- 통신 데이터 암호화, 통신 데이터 서명 등을 구현

### IPsec
- TCP/IP 통신에서 사용하는 IP 패킷 단위의 암호화 + 패킷이 변조되지 않았다는 것을 인증하기 위한 프로토콜
- VPN을 구현할 때 자주 사용
- IP 패킷 자체 암호화 -> payload 화 (전체를 payload로 칭함) -> IP 헤더를 새로 붙이기
- payload: 헤더를 제외한 데이터 자체를 일컬음

#### IPsec Gateway
- IP 패킷의 암호화, 복호화 수행
- 암호화: 보통의 TCP/IP 통신을 IPsec 통신으로 변환
- 복호화: IPsec 통신을 보통의 TCP/IP 통신으로 변환
- IP 패킷 1개 : IPsec 패킷 1개의 1:1 대응 구조

#### 공통키(대칭키) 암호화
- 패킷을 하나하나 암호화해야하므로 속도가 비교적 빠른 **공통키** 암호화 사용
- 암호화 후 **인증키**로 만든 해시 값으로 변조 대비
- 송신, 수신에 각각 공통키와 인증키 필요 = 총 ***4개***
- IKE(Internet Key Exchange): 키 설정하는 장치

### PPTP
- Microsoft가 개발한 프로토콜
- 표준 내장. 소프트웨어 추가 없이 바로 사용 가능
- 채택되어 있는 RC4는 암호 강도가 약해 해킹 위험성이 있다
- 점점 사용이 자제되는 프로토콜

### 