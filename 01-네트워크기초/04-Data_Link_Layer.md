# Step4. 데이터 링크 계층
  - 이더넷
  - CSMA/CD
  - MAC 주소
  - 스위치
  - 충돌 도메인
  - 이더넷 표준


### Data Link Layer
네트워크 물리적 장비 간의 신호를 주고받는 규칙 결정
- TCP/IP 모델에서는 네트워크 계층에 해당
- **프레임**을 만들어 네트워크 계층에 전달 (캡슐화)
- **프레임**을 분리하여 도착지 맥주소로 데이터 전달 (역캡슐화)

### Ethernet
데이터 링크 계층에서 가장 많이 사용되는 규칙
- 목적지가 아닌 컴퓨터는 허브를 통해 데이터를 받아도 **무시**한다. (보장)
- 동시에 여러대에서 데이터를 전송해도 충돌이 일어나지 않는다.
	* CSMA/CD: 데이터가 충돌하지 않도록 전송 시점을 늦추는 방법 (현재는 스위치 사용)
		- Carrier Sense: 데이터를 보내기 전에 현재 케이블에 신호가 흐르는지 검사한다
		- Multiple Access: 데이터가 흐르지 않으면 데이터를 보낸다
		- Collision Detect: 충돌이 일어났는지 검사한다

##### 이더넷 규격
|    이름    |  통신속도  |        케이블        | 케이블최대길이 | 표준화 연도 |
| --------- | -------- | ------------------ | ---------- | -------- |
|  10BASE5  |  10Mbps  |      동축케이블       |    500m    |  1982년  |
|  10BASE2  |  10Mbps  |      동축케이블       |    185m    |  1988년  |
| 10BASE5-T |  10Mbps  |  UTP케이블(Cat3이상)  |    100m    |  1990년  |
|100BASE-TX |  100Mbps |  UTP케이블(Cat5이상)  |    100m    |  1995년  |
|1000BASE-T | 1000Mbps |  UTP케이블(Cat5이상)  |    100m    |  1999년  |
| 10GBASE-T |  10Gbps  |  UTP케이블(Cat6a이상) |    100m    |  2006년  |

- 규격이름: [통신속도] - [전송방식(BASEBAND)] - [케이블(UTP 또는 길이)]


### MAC address
랜카드에 정해져 있는 유니크한 물리 주소 *(랜카드: 물리계층에서 비트를 전기 신호로 바꿔주는 칩)*
- 48비트 숫자 (24비트-제조사, 24비트-일련번호)

### 프레임
데이터 링크 계층의 데이터를 부르는 이름
- [이더넷 헤더][데이터][트레일러] 로 구성

##### 이더넷 헤더
- 총 14바이트로 구성 
- [목적지 맥주소(6 bytes)], [출발지 맥주소(6 bytes)], [유형(2 bytes)]

| 유형번호 |  프로토콜 |
| ------ | ------- |
|  0800  |   IPv4  |
|  0806  |   ARP   |
|  8035  |   RARP  |
|  814C  |   SNMP over Ethernet |
|  86DD  |   IPv6  |

##### 트레일러 (FCS)
- Frame Check Sequence: 데이터 전송 도중 오류 검사


### 스위치
- 허브 대신 주로 사용
- 데이터 링크 계층에서 동작
- 여러개의 포트로 구성 (여러대의 컴퓨터 연결 가능)
- 레이어 2 스위치, 스위칭 허브라고도 불림
- 주소 학습 기능: 프레임에서 모르는 맥주소가 나오면 맥 주소 테이블에 추가
- 전이중 통신이나 내부에서 충돌 제어해주므로 데이터 **동시** 송수신 가능

##### Mac Address Table
- 스위치 안에 있는 **맥주소-포트번호**를 저장한 데이터베이스

##### Flooding
- 맥 주소 테이블에 도착지 정보가 없어서 송신 포트를 제외한 모든 포트에 데이터를 전송하는 일
- 도착지 맥 주소를 찾으면 해당 포트와 맥 주소를 테이블에 저장

##### Mac Address Filtering
- 플러딩과 반대로 목적지를 확실히 선택하는 일
- 해당 포트로만 데이터를 전달한다


### 전이중 통신
- 동시에 데이터 송수신 (예: 랜 케이블(크로스 케이블))

### 반이중 통신
- 회선하나로 번갈아 가며 데이터 송신, 수신 (예: 더미 허브)

##### 충돌 도메인
- 데이터 충돌이 일어났을 때 영향을 미치는 범위
- 더미 허브의 경우, 전체가 영향을 받지만 스위치는 본인 컴퓨터만 영향
- 충돌 도메인을 좁히는 것이 중요한 이슈


### ARP
- 컴퓨터의 IP 주소로 MAC 주소를 알아내기 위한 프로토콜
- 컴퓨터가 이더넷 프레임을 전송하기 위해 도착지의 MAC 주소를 알아낼 때 사용
- ARP 요청과 응답으로 MAC 주소를 알아내면, IP - MAC 매핑 테이블을 메모리에 보관 => **ARP 테이블**
- IP가 변하면 MAC 주소도 변하므로 보존 기간 지정 (ARP 캐시)
